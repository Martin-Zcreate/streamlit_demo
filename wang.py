import streamlit as st
from openai import OpenAI
import streamlit.components.v1 as components
import matplotlib.pyplot as plt
import matplotlib.patches as patches
import matplotlib

# è®¾ç½®ä¸­æ–‡å­—ä½“ï¼Œè§£å†³ matplotlib ä¸­æ–‡ä¹±ç é—®é¢˜
try:
    matplotlib.rcParams['font.sans-serif'] = ['SimHei', 'Microsoft YaHei', 'Arial Unicode MS']
    matplotlib.rcParams['axes.unicode_minus'] = False
except:
    pass

# è®¾ç½®é¡µé¢é…ç½® (å¿…é¡»æ˜¯ç¬¬ä¸€ä¸ª Streamlit å‘½ä»¤)
st.set_page_config(
    page_title="ç¾½æ¯›çƒå…¨èƒ½åŠ©æ‰‹",
    page_icon="ğŸ¸",
    layout="wide",
    initial_sidebar_state="expanded"
)

def page_racket_guide():
    """
    åŠŸèƒ½æ¨¡å— 1: å™¨ææŒ‡å—
    åŒ…å«çƒæ‹é€‰æ‹©å’Œç¾½æ¯›çƒé€‰æ‹©å»ºè®®
    """
    st.header("ğŸ¸ å™¨ææŒ‡å—")
    st.write("å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚é€‰å¯¹è£…å¤‡ï¼Œè®©ä½ çš„çƒæŠ€å¦‚è™æ·»ç¿¼ï¼")

    # ä½¿ç”¨ Tabs åˆ†å‰²çƒæ‹å’Œçƒçš„å†…å®¹ï¼Œå¢åŠ  Emoji
    tab1, tab2 = st.tabs(["ğŸ¸ çƒæ‹ç¯‡", "ğŸª¶ çƒç¯‡"])

    with tab1:
        st.subheader("ğŸ¤” å¦‚ä½•é€‰æ‹©é€‚åˆè‡ªå·±çš„çƒæ‹ï¼Ÿ")
        st.info("ğŸ’¡ **æ–°æ‰‹å»ºè®®**ï¼šé€‰æ‹©ç³–æ°´æ‹ï¼ˆå®¹æ˜“ä¸Šæ‰‹ï¼‰ï¼Œä¸è¦ç›²ç›®è¿½æ±‚é«˜ç£…æ•°å’Œé¡¶çº§çƒæ˜ŸåŒæ¬¾ã€‚")
        
        # ä½¿ç”¨è¡¨æ ¼å±•ç¤ºå‚æ•°å»ºè®®
        data = {
            "å‚æ•°": ["âš–ï¸ é‡é‡ (U)", "âš–ï¸ å¹³è¡¡ç‚¹ (mm)", "ğŸ’ª ä¸­æ†è½¯ç¡¬", "ğŸ‘¥ é€‚åˆäººç¾¤"],
            "è¿›æ”»å‹ (3U)": ["85-89g (3U)", "295+", "ç¡¬", "åŠ›é‡å¤§ã€å–œæ¬¢æ€çƒçš„è¿›é˜¶çƒå‹"],
            "å¹³è¡¡å‹ (4U)": ["80-84g (4U)", "285-295", "é€‚ä¸­", "æ”»å®ˆå…¼å¤‡ï¼Œé€‚åˆå¤§å¤šæ•°ä¸šä½™çƒå‹"],
            "é€Ÿåº¦å‹ (4U/5U)": ["<84g (4U/5U)", "<285", "è½¯/é€‚ä¸­", "åŠ›é‡å°ã€åŒæ‰“å‰åœºã€åˆå­¦è€…"]
        }
        #st.table(data)
        with st.container(border=True):
            st.write("ğŸ”¥ **è¿›æ”»å‹ (3U)**")
            st.caption("é€‚åˆ: åŠ›æ°”å¤§,å–œæ¬¢æ€çƒçš„å¤§ç¥")
            
        with st.container(border=True):
            st.write("âš–ï¸ **å¹³è¡¡å‹ (4U)**")
            st.caption("é€‚åˆ: å¤§å¤šæ•°äºº,æ”»å®ˆéƒ½è¡Œ")
             
        with st.container(border=True):
            st.write("ğŸš€ **é€Ÿåº¦å‹ (5U)**")
            st.caption("é€‚åˆ: åŠ›æ°”å°,å¥³ç”Ÿ,åŒæ‰“å‰åœº")
        
        st.markdown("""
        ### ğŸ”‘ å…³é”®å‚æ•°è§£è¯»ï¼š
        *   **âš–ï¸ U (é‡é‡)**: æ•°å­—è¶Šå¤§è¶Šè½»ã€‚**3U** é€‚åˆè¿›æ”»ï¼Œ**4U** æœ€é€šç”¨ï¼Œ**5U** é€‚åˆå¥³ç”Ÿæˆ–åŠ›é‡å°çš„çƒå‹ã€‚
        *   **âš–ï¸ å¹³è¡¡ç‚¹**: **å¤´é‡**åˆ©äºæ€çƒï¼ˆè¿›æ”»ï¼‰ï¼Œ**å¤´è½»**åˆ©äºæŒ¥æ‹é€Ÿåº¦ï¼ˆé˜²å®ˆ/å¹³æŠ½æŒ¡ï¼‰ã€‚
        *   **ğŸ’ª ä¸­æ†**: **æ†ç¡¬**æŒ‡å‘æ€§å¥½ä½†éœ‡æ‰‹ï¼ˆéœ€è¦å‘åŠ›å¥½ï¼‰ï¼Œ**æ†è½¯**å€ŸåŠ›å¥½é€‚åˆæ–°æ‰‹ã€‚
        """)

    with tab2:
        st.subheader("ğŸª¶ ç¾½æ¯›çƒçš„é€‰æ‹©")
        col1, col2 = st.columns(2)
        
        with col1:
            st.markdown("### ğŸ¦¢ æè´¨åŒºåˆ«")
            st.write("**ğŸ¦¢ é¹…æ¯›**: è€æ‰“æ€§å¥½ï¼Œé£è¡Œç¨³å®šï¼Œä»·æ ¼è¾ƒè´µã€‚é€‚åˆæ¯”èµ›å’Œè¿›é˜¶è®­ç»ƒã€‚")
            st.write("**ğŸ¦† é¸­æ¯›**: ä»·æ ¼å®æƒ ï¼Œè€æ‰“æ€§ç¨å·®ã€‚é€‚åˆæ—¥å¸¸ç»ƒä¹ ã€‚")
            st.write("**ğŸ§¶ å°¼é¾™çƒ**: æå…¶è€æ‰“ï¼Œä½†é£è¡Œè½¨è¿¹ä¸çœŸç¾½æ¯›çƒå·®å¼‚å¤§ï¼Œä»…å»ºè®®æˆ·å¤–æˆ–å¨±ä¹ã€‚")

        with col2:
            st.markdown("### ğŸš€ çƒé€Ÿé€‰æ‹©")
            st.write("çƒé€Ÿå—æ¸©åº¦å’Œæµ·æ‹”å½±å“ï¼Œä¸€èˆ¬åˆ†ä¸º **76** å’Œ **77** é€Ÿã€‚")
            st.warning("âš ï¸ **æ³¨æ„**ï¼šé€‰é”™çƒé€Ÿä¼šä¸¥é‡å½±å“å‡»çƒæ‰‹æ„Ÿï¼")
            st.dataframe({
                "çƒé€Ÿæ ‡å·": [76, 77],
                "é€‚ç”¨æ¸©åº¦": ["â˜€ï¸ å¤å­£ / é«˜æ¸© (25Â°C+)", "â„ï¸ å†¬å­£ / ä½æ¸© (<25Â°C)"],
                "ç‰¹ç‚¹": ["é£è¡Œè¾ƒæ…¢ï¼Œä¸æ˜“å‡ºç•Œ", "é£è¡Œè¾ƒå¿«ï¼Œé€‚åˆå†·å¤©"]
            }, hide_index=True)
        
        st.divider()
        st.subheader("æ™ºèƒ½é€‰æ‹å°åŠ©æ‰‹")
        
        p = st.radio("ä½ çš„åŠ›é‡å¤§å—?",["å¤§","ä¸­","å°"])
        
        if st.button("å¸®æˆ‘æ¨è"):
            if p == "å¤§":
                st.success("æ¨è: 3U è¿›æ”»æ‹,æš´åŠ›æ€çƒ!")
            elif p == "ä¸­":
                st.success("æ¨è: 4U å¹³è¡¡æ‹,æ”»å®ˆå…¼å¤‡!")
            else:
                st.success("æ¨è: 5U è½»é‡æ‹,æŒ¥åŠ¨çµæ´»!")

def page_maintenance():
    """
    åŠŸèƒ½æ¨¡å— 2: è£…å¤‡ç»´æŠ¤
    åŒ…å«æ‰‹èƒ¶ç¼ æ³•æ•™å­¦
    """
    st.header("ğŸ› ï¸ è£…å¤‡ç»´æŠ¤")
    
    st.subheader("ğŸ§¶ å¦‚ä½•æ­£ç¡®ç¼ æ‰‹èƒ¶ (Grip)")
    st.write("æ‰‹èƒ¶æ˜¯æ¶ˆè€—å“ï¼Œå®šæœŸæ›´æ¢èƒ½ä¿æŒè‰¯å¥½çš„æ¡æŒæ„Ÿï¼Œé˜²æ­¢çƒæ‹æ»‘è½ã€‚")

    col1, col2 = st.columns([1, 1])

    with col1:
        st.markdown("### âœ… æ­¥éª¤æ¸…å• (ä¸æµªè´¹æ‰‹èƒ¶ç‰ˆ)")
        steps = [
            "ğŸ—‘ï¸ æ’•æ‰æ‰‹èƒ¶è¡¨é¢çš„ä¿æŠ¤è†œã€‚",
            "ğŸ ä»æ‹æŸ„åº•éƒ¨å¼€å§‹ï¼Œç»†ç«¯å¯¹é½æ‹åº•è¾¹ç¼˜ã€‚",
            "ğŸ”„ æ‹‰ç´§æ‰‹èƒ¶ï¼Œç¬¬ä¸€åœˆé‡å å®Œå…¨è¦†ç›–ï¼Œé˜²æ­¢æ¾è„±ã€‚",
            "ğŸŒ€ èºæ—‹å‘ä¸Šç¼ ç»•ï¼Œé‡å è¾¹ç¼˜çº¦ 2-3mm (çº¦ 1/3 å®½åº¦)ã€‚",
            "âœ‚ï¸ ç¼ åˆ°é”¥ç›–å¤„å‰ªæ–­å¤šä½™éƒ¨åˆ†ï¼ˆå‰ªæˆæ–œè§’ï¼‰ã€‚",
            "ğŸ”’ ç”¨å°å£èƒ¶å¸¦å›ºå®šæ”¶å°¾å¤„ã€‚"
        ]
        for i, step in enumerate(steps, 1):
            st.write(f"**{i}.** {step}")
            
    with col2:
        st.markdown("### ğŸ“º æ•™å­¦è§†é¢‘")
        # Bilibili è§†é¢‘åµŒå…¥ (BV16e411N76a)
        # ä½¿ç”¨ iframe åµŒå…¥ B ç«™æ’­æ”¾å™¨
        components.iframe(
            src="https://player.bilibili.com/player.html?bvid=BV16e411N76a&page=1&high_quality=1&danmaku=0",
            height=300,
            scrolling=False
        )
        st.caption("ï¼ˆè§†é¢‘æ¥æºï¼šBilibili - ç¾½æ¯›çƒæ‰‹èƒ¶ç¼ æ³•æ•™å­¦ï¼‰")

def page_technique():
    """
    åŠŸèƒ½æ¨¡å— 3: æŠ€æœ¯å…¥é—¨
    åŒ…å«æ¡æ‹å’Œæ¥å‘çƒ
    """
    st.header("ğŸ“ æŠ€æœ¯å…¥é—¨")

    st.subheader("1ï¸âƒ£ æ­£ç¡®æ¡æ‹ï¼šä¸‡æ³•ä¹‹æº")
    st.write("é”™è¯¯çš„æ¡æ‹æ˜¯â€œè‹è‡æ‹â€ï¼Œæ­£ç¡®çš„æ¡æ‹åƒâ€œæ¡æ‰‹â€æˆ–â€œæ‹¿èœåˆ€â€ã€‚")

    col1, col2 = st.columns(2)
    with col1:
        st.success("ğŸ–ï¸ **æ­£æ‰‹æ¡æ‹** (Vå­—è™å£)")
        st.write("""
        *   **ğŸ¯ è™å£**: å¯¹ç€æ‹æ¡†çª„é¢ã€‚
        *   **âœŒï¸ æ‰‹æŒ‡**: æ‹‡æŒ‡å’Œé£ŸæŒ‡è´´åœ¨å®½é¢ä¸Šï¼Œå‘ˆ V å­—å½¢ã€‚
        *   **ğŸ•³ï¸ æŒå¿ƒ**: ç•™ç©ºï¼Œä¾¿äºæ‰‹æŒ‡å‘åŠ›ã€‚
        *   **ğŸ¯ é€‚ç”¨åœºæ™¯**: é«˜è¿œçƒã€æ€çƒã€åŠçƒã€æ­£æ‰‹æŒ‘çƒã€‚
        """)
        # é¢„ç•™å›¾ç‰‡ä½ç½®
        st.image("https://media.giphy.come/media/v1.Y2LKPTc5MGI3NJEx.../giphy.gif", caption="æ­£æ‰‹æ¡æ‹ç¤ºæ„å›¾")

    with col2:
        st.warning("ğŸ‘ **åæ‰‹æ¡æ‹** (å¤§æ‹‡æŒ‡é¡¶å®½é¢)")
        st.write("""
        *   **ğŸ”„ å˜åŒ–**: åœ¨æ­£æ‰‹æ¡æ‹åŸºç¡€ä¸Šï¼Œæ‹‡æŒ‡ä¸Šç§»é¡¶ä½æ‹æŸ„å®½é¢ã€‚
        *   **ğŸ’ª å‘åŠ›**: ä¾é å¤§æ‹‡æŒ‡çš„é¡¶æ¨åŠ›å‘åŠ›ã€‚
        *   **ğŸ¯ é€‚ç”¨åœºæ™¯**: åæ‰‹é«˜è¿œã€åæ‰‹ç½‘å‰æ‰‘çƒã€å¹³æŠ½æŒ¡ã€‚
        """)
        # é¢„ç•™å›¾ç‰‡ä½ç½®
        st.image("https://media.giphy.come/media/v1.Y2LKPTc5MGI3NJEx.../giphy.gif", caption="åæ‰‹æ¡æ‹ç¤ºæ„å›¾")

    st.divider()

    st.subheader("2ï¸âƒ£ æ¥å‘çƒç«™ä½")
    st.markdown("""
    *   **ğŸ‘¤ å•æ‰“**: ç«™åœ¨åœºåœ°ä¸­çº¿é™„è¿‘ï¼Œååä¸€ç‚¹ï¼ˆä¾¿äºåé€€æ¥é«˜è¿œçƒï¼‰ã€‚å³è„šåœ¨å‰ï¼ˆå³æ‰‹æŒæ‹ï¼‰ï¼Œé‡å¿ƒåœ¨å³è„šï¼Œå‡†å¤‡å¯åŠ¨ã€‚
    *   **ğŸ‘¥ åŒæ‰“**: 
        *   **ğŸ¸ å‘çƒæ–¹**: ç«™åœ¨å‰å‘çƒçº¿åä¸€ç‚¹ï¼Œç´§è´´ä¸­çº¿ï¼ˆTå­—åŒºï¼‰ã€‚
        *   **ğŸ›¡ï¸ æ¥å‘çƒæ–¹**: ç«™åœ¨ç¦»å‰å‘çƒçº¿çº¦ä¸€æ­¥çš„ä½ç½®ï¼Œé‡å¿ƒé™ä½ï¼Œä¸¾æ‹è¿‡å¤´ï¼Œå‡†å¤‡æ‰‘çƒæˆ–æ¨åº•çº¿ã€‚
    """)

def page_rules():
    """
    åŠŸèƒ½æ¨¡å— 4: è§„åˆ™ç™¾ç§‘
    åŒ…å«å•åŒæ‰“è§„åˆ™å’Œè®¡åˆ†
    """
    st.header("ğŸ“– è§„åˆ™ç™¾ç§‘")
    
    st.metric(label="ğŸ† å½“å‰èµ›åˆ¶", value="21 åˆ†åˆ¶ (æ¯çƒå¾—åˆ†)")

    st.subheader("ğŸš« å¸¸è§è¿ä¾‹è§£æ")
    with st.expander("âŒ å‘çƒè¿ä¾‹ (ç‚¹å‡»å±•å¼€)"):
        st.write("""
        1.  **ğŸ“ è¿‡è…°**: å‡»çƒç¬é—´ï¼Œçƒçš„æ•´ä½“é«˜åº¦é«˜äºå‘çƒè€…çš„è…°éƒ¨ï¼ˆæœ€ä½è‚‹éª¨ä¸‹æ²¿ï¼‰ã€‚ç°åœ¨å›½é™…æ¯”èµ›å¤šç”¨ 1.15ç±³å®šé«˜ã€‚
        2.  **âœ‹ è¿‡æ‰‹**: å‡»çƒç¬é—´ï¼Œæ‹å¤´æ²¡æœ‰æ˜æ˜¾ä½äºæ‰‹è…•ã€‚
        3.  **ğŸ¦¶ è¸©çº¿**: å‘çƒæ—¶ï¼ŒåŒè„šå¿…é¡»æœ‰ä¸€éƒ¨åˆ†ä¸åœ°é¢æ¥è§¦ï¼Œä¸”ä¸å¾—è¿‡å‘çƒåŒºç•Œçº¿ã€‚
        4.  **â±ï¸ æœªè¿ç»­æŒ¥æ‹**: å‘çƒåŠ¨ä½œå¿…é¡»è¿è´¯ï¼Œä¸å¯æœ‰åœé¡¿æ¬ºéª—å¯¹æ‰‹ã€‚
        """)

    with st.expander("ğŸ¸ å•æ‰“ vs åŒæ‰“ è¾¹ç•Œè§„åˆ™"):
        st.write("""
        *   **ğŸ‘¤ å•æ‰“**: 
            *   å‘çƒ: ç˜¦é•¿ (åº•çº¿åˆ°åº•ï¼Œè¾¹çº¿ç”¨å†…çº¿)ã€‚
            *   å¯¹æ‰“: ç˜¦é•¿ (åº•çº¿åˆ°åº•ï¼Œè¾¹çº¿ç”¨å†…çº¿)ã€‚
        *   **ğŸ‘¥ åŒæ‰“**: 
            *   å‘çƒ: çŸ®èƒ– (åº•çº¿ç”¨å†…çº¿-åŒæ‰“åå‘çƒçº¿ï¼Œè¾¹çº¿ç”¨å¤–çº¿)ã€‚
            *   å¯¹æ‰“: å…¨åœº (åº•çº¿åˆ°åº•ï¼Œè¾¹çº¿ç”¨å¤–çº¿)ã€‚
        """)
        
    with st.expander("ğŸ”¢ 21åˆ†åˆ¶è®¡åˆ†è§„åˆ™"):
        st.markdown("""
        *   **âœ… æ¯çƒå¾—åˆ†**: æ— è®ºè°å‘çƒï¼Œèµ¢çƒæ–¹å¾—åˆ†ã€‚
        *   **ğŸ† è·èƒœ**: å…ˆå¾— 21 åˆ†è€…è·èƒœã€‚
        *   **âš–ï¸ å¹³å±€**: 20å¹³åï¼Œéœ€é¢†å…ˆ 2 åˆ†æ‰èƒ½è·èƒœï¼ˆå¦‚ 22-20, 25-23ï¼‰ã€‚
        *   **ğŸ›‘ å°é¡¶**: 29å¹³åï¼Œå…ˆå¾—ç¬¬ 30 åˆ†è€…è·èƒœã€‚
        *   **ğŸ¸ ä¸‰å±€ä¸¤èƒœ**: æ¯”èµ›é‡‡ç”¨ä¸‰å±€ä¸¤èƒœåˆ¶ã€‚
        """)
        
    st.divider()
    st.subheader("ğŸ“ è§„åˆ™å°æµ‹éªŒ")
    col1, col2 = st.columns([1, 1])
    
    with col1:
        ans = st.radio("åŒæ‰“å‘çƒæ—¶,é˜Ÿå‹å¯ä»¥å»æ¥çƒå—?",["å¯ä»¥","ä¸å¯ä»¥"])
    
        if st.button(" ğŸ“„ æäº¤ç­”æ¡ˆ"):
            if ans == "ä¸å¯ä»¥":
                st.balloons()
                st.success("æ­å–œä½ ç­”å¯¹äº†!åªæœ‰æ¥å‘çƒé˜Ÿå‘˜æ‰èƒ½æ¥çƒ.")
            else:
                st.error("æ­å–œä½ ç­”é”™äº†!!!å¦‚æœé˜Ÿå‹æ¥çƒ,å¯¹æ–¹å°±è¦å¾—åˆ†äº†.ä½ çš„é˜Ÿå‹å°†ä¼šæš´æ‰“ä½ ä¸€é¡¿!")
                
    with col2:
        ans = st.radio("æ­£è§„ç¾½æ¯›çƒæ¯”èµ›ï¼Œä¸€å±€é€šå¸¸å…ˆå¾—å¤šå°‘åˆ†è·èƒœï¼Ÿ",["21","25"])
    
        if st.button("æäº¤ç­”æ¡ˆ"):
            if ans == "21":
                st.balloons()
                st.success("æ­å–œä½ ç­”å¯¹äº†!ä½ å·²ç»æŒæ¡è·èƒœè§„åˆ™!")
            else:
                st.error("æ­å–œä½ ç­”é”™äº†!!!å›å»é‡æ–°çœ‹ä¸€ä¸‹è§„åˆ™å§.ä¸ç„¶ä½ çš„é˜Ÿå‹å°†ä¼šæš´æ‰“ä½ ä¸€é¡¿!")
        

def page_court():
    """
    åŠŸèƒ½æ¨¡å— 5: åœºåœ°æ ‡å‡†
    ç»˜åˆ¶åœºåœ°ç¤ºæ„å›¾å’Œæ˜¾ç¤ºå…³é”®æ•°æ®
    """
    st.header("ğŸŸï¸ åœºåœ°æ ‡å‡†")
    
    col1, col2 = st.columns([1, 2])
    
    with col1:
        st.subheader("ğŸ“ å…³é”®æ•°æ®")
        st.metric("åœºåœ°å…¨é•¿", "13.40 ç±³")
        st.metric("å•æ‰“å®½åº¦", "5.18 ç±³")
        st.metric("åŒæ‰“å®½åº¦", "6.10 ç±³")
        st.metric("ç½‘é«˜ (ä¸¤ç«¯)", "1.55 ç±³")
        st.metric("ç½‘é«˜ (ä¸­é—´)", "1.524 ç±³")

    with col2:
        st.subheader("ğŸ—ºï¸ æ ‡å‡†åœºåœ°ç¤ºæ„å›¾")
        # ä½¿ç”¨ matplotlib ç»˜åˆ¶ç®€å•çš„åœºåœ°
        fig, ax = plt.subplots(figsize=(10, 6))
        
        # åœºåœ°å¤–æ¡† (åŒæ‰“è¾¹ç•Œ) 13.4 * 6.1
        court = patches.Rectangle((0, 0), 13.4, 6.1, linewidth=2, edgecolor='#2E7D32', facecolor='#81C784')
        ax.add_patch(court)
        
        # å•æ‰“è¾¹çº¿ (5.18m, å·¦å³å„ç¼©è¿› 0.46m)
        ax.hlines([0.46, 6.1-0.46], 0, 13.4, colors='white', linewidth=1.5)
        
        # ä¸­çº¿ (ç½‘å‰é™¤å¤–)
        # å®é™…ä¸Šä¸­çº¿æ˜¯ä»åº•çº¿åˆ°å‰å‘çƒçº¿
        ax.hlines(3.05, 0, 1.98, colors='white', linewidth=1.5) # å·¦ä¾§åº•çº¿åˆ°åå‘çƒçº¿
        ax.hlines(3.05, 13.4-1.98, 13.4, colors='white', linewidth=1.5) # å³ä¾§
        ax.hlines(3.05, 0, 13.4, colors='white', linewidth=1, linestyles='--') # è¾…åŠ©ä¸­çº¿
        
        # å‰å‘çƒçº¿ (è·ç¦»ç½‘ 1.98m) -> åœºåœ°ä¸­å¿ƒæ˜¯ 6.7
        # å·¦å‰å‘çƒçº¿: 6.7 - 1.98 = 4.72
        # å³å‰å‘çƒçº¿: 6.7 + 1.98 = 8.68
        ax.vlines([4.72, 8.68], 0, 6.1, colors='white', linewidth=1.5)
        
        # åŒæ‰“åå‘çƒçº¿ (è·ç¦»åº•çº¿ 0.76m)
        ax.vlines([0.76, 13.4-0.76], 0, 6.1, colors='white', linewidth=1.5)
        
        # çƒç½‘ (ä½äºä¸­é—´ 6.7)
        ax.vlines(6.7, -0.5, 6.6, colors='black', linewidth=3, linestyles='solid', label='çƒç½‘')
        
        # æ ‡æ³¨
        ax.text(6.7, 6.8, 'çƒç½‘ (Net)', ha='center', fontsize=10)
        ax.text(2, 3.2, 'å·¦å‘çƒåŒº', ha='center', color='white')
        ax.text(11.4, 3.2, 'å³å‘çƒåŒº', ha='center', color='white')
        
        # è®¾ç½®åæ ‡è½´ä¸å¯è§
        ax.set_xlim(-1, 14.4)
        ax.set_ylim(-1, 7.1)
        ax.axis('off')
        ax.set_aspect('equal')
        
        st.pyplot(fig)
        st.caption("æ³¨ï¼šç»¿è‰²åŒºåŸŸä¸ºåœºåœ°ï¼Œç™½è‰²çº¿æ¡ä¸ºç•Œçº¿ã€‚")
        
def page_warmup():
    st.header("çƒ­èº«åŠ¨ä½œ")
    st.write("æ‰“çƒå‰ä¸€å®šè¦çƒ­èº«!!!")
    st.markdown("### ğŸ“º æ•™å­¦è§†é¢‘")
      # Bilibili è§†é¢‘åµŒå…¥ (BV16e411N76a)
      # ä½¿ç”¨ iframe åµŒå…¥ B ç«™æ’­æ”¾å™¨
    col1, col2 = st.columns([1, 1])
    
    with col1:
        st.markdown("### âœ… ç¾½æ¯›çƒçƒ­èº«æ­¥éª¤ï¼ˆä¸æ‘†çƒ‚ä¸å—ä¼¤ç‰ˆ ï¼‰")
        steps = [
           " ğŸŒ€ åŸåœ°å°ç¢æ­¥ + æ‘†è‡‚ï¼Œå”¤é†’å…¨èº«å…³èŠ‚ï¼Œåˆ«ä¸€ä¸Šæ¥å°±çŒ›å†²ã€‚",
           "ğŸ¦µ å·¦å³å¼“æ­¥å‹è…¿ï¼Œå¤§è…¿åä¾§é…¸é…¸çš„æ‰åˆ°ä½ ã€‚",
           "ğŸ¦¶ è„šè¸é¡ºæ—¶é’ˆ + é€†æ—¶é’ˆç»•åœˆï¼Œæ•‘çƒå…¨é å®ƒåˆ«å´´è„šğŸ™ã€‚",
           "ğŸ¤¸ ä¾§å¼“æ­¥æ‹‰ä¼¸ï¼Œèƒ¯éƒ¨æ‰“å¼€ï¼Œæ¥æ–œçº¿çƒæ‰ä¸æ»‘âœ¨ã€‚",
           " ğŸ§˜ è‚©é¢ˆç»•ç¯ + æ‰‹è‡‚æ‹‰ä¼¸ï¼ŒæŒ¥æ‹ä¸åƒµç¡¬ï¼Œä¸ç„¶ç¬¬äºŒå¤©æŠ¬ä¸èµ·æ‰‹ğŸ˜µâ€ğŸ’«ã€‚",
           "ğŸƒ å‰åäº¤å‰æ­¥ + å¹¶æ­¥ç§»åŠ¨ï¼Œæ¨¡æ‹Ÿåœºä¸Šæ­¥ä¼ï¼Œåˆ«ç«™ç€å‘å‘†ğŸ«¥ã€‚"
           "ğŸ¸ è½»æŒ¥æ‹ç©ºå‡»ï¼Œæ‰‹è…•æ”¾æ¾æ‰¾æ„Ÿè§‰ï¼Œåˆ«ä¸€ä¸Šæ¥å°±æ€çƒğŸ’¥ã€‚"
           "æœ€åæ·±å‘¼å¸è°ƒæ•´èŠ‚å¥ï¼Œèº«ä½“çƒ­äº†å†ä¸Šåœºï¼Œä¸»æ‰“ä¸€ä¸ªç¨³ã€‚"
        ]
        for i, step in enumerate(steps, 1):
            st.write(f"**{i}.** {step}")

    with col2:
        components.iframe(
            src="https://player.bilibili.com/player.html?isOutside=true&aid=114048209259005&bvid=BV1PNPueKE2P&cid=28526708369&p=1",
            height=300,
            scrolling=False
            )
        st.caption("ï¼ˆè§†é¢‘æ¥æºï¼šBilibili - ç¾½æ¯›çƒèµ›å‰çƒ­èº«ï¼‰")
        
def page_plan():
    st.header("ğŸ“… æˆ‘çš„è®­ç»ƒè®¡åˆ’")
        
    goal = st.selectbox("ä½ æƒ³ç»ƒä»€ä¹ˆ?",["ç»ƒä½“èƒ½","ç»ƒæ­¥ä¼","ç»ƒæ€çƒ"])
        
    if st.button("ç”Ÿæˆè®¡åˆ’"):
        st.write(f"æ­£åœ¨ä¸ºä½ ç”Ÿæˆã€{goal}ã€‘è®¡åˆ’,è¯·è€å¿ƒç­‰å¾…...")
            
        if goal == "ç»ƒä½“èƒ½":
            st.info("å‘¨ä¸€: è·‘æ­¥ 3 å…¬é‡Œ\nå‘¨ä¸‰: è·³ç»³ 500 ä¸ª")
        elif goal =="ç»ƒæ­¥ä¼":
            st.info("å‘¨äºŒ: ç±³å­—æ­¥ 20 åˆ†é’Ÿ\nå‘¨å››: è·¨æ­¥ç»ƒä¹  10 ç»„")
        else:
            st.info("å‘¨äº”: æŒ¥æ‹ 200 æ¬¡\nå‘¨å…­: å¯¹å¢™æŠ½çƒ 15 åˆ†é’Ÿ")
            
def page_ai():
    st.header("AI æ•™ç»ƒé—®ç­”")
    
    key = st.text_input("è¯·è¾“å…¥ Deepseek API Key",type="password")
    base = "https://api.deepseek.com"
    
    questions = [
        "å¦‚ä½•ç»ƒä¹ é«˜è¿œçƒ",
        "æ€çƒæ€ä¹ˆæ‰èƒ½æ›´æœ‰åŠ›",
        "åŒæ‰“å‘çƒè§„åˆ™æ˜¯ä»€ä¹ˆ",
        "æ–°æ‰‹åº”è¯¥é€‰ä»€ä¹ˆçƒæ‹",
        "ç¾½æ¯›çƒæ¯”èµ›æ€ä¹ˆè®¡åˆ†",
        "æ€ä¹ˆæ­£ç¡®æ¡ç¾½æ¯›çƒæ‹",
        "æ€çƒå’ŒåŠçƒçš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆ",
        "è¢«åŠ¨æ—¶åº”è¯¥ä¼˜å…ˆæ‰“ä»€ä¹ˆçƒ",
        "ç¾½æ¯›çƒæ¯”èµ›ä¸€èˆ¬å…ˆå¾—å¤šå°‘åˆ†è·èƒœ",
        "å‘çƒæ—¶,çƒè¦è½åœ¨å¯¹æ–¹å“ªä¸ªåŒºåŸŸæ‰ç®—æœ‰æ•ˆ",
        "å‘çƒæ—¶è„šèƒ½ä¸èƒ½è¸©çº¿",
        "ç¾½æ¯›çƒæ¯”èµ›ä¸­,èƒ½ä¸èƒ½ç”¨èº«ä½“æ¥çƒ",
        "ä¸ºä»€ä¹ˆé«˜æ‰‹æ€»å–œæ¬¢æŠŠçƒæ‰“åˆ°å¯¹æ–¹å››è§’",
        "æ­£æ‰‹é«˜è¿œçƒçš„å‡»çƒç‚¹åº”è¯¥åœ¨å“ªé‡Œ",
        "å•æ‰“å’ŒåŒæ‰“çš„å‘çƒåŒºæœ‰ä»€ä¹ˆåŒºåˆ«",
        "åæ‰‹å‘çƒä¸€èˆ¬ç”¨åœ¨ä»€ä¹ˆæƒ…å†µ",
        "ç½‘å‰æ“çƒçš„ä¸»è¦ç›®çš„æ˜¯ä»€ä¹ˆ",
        "æ¥æ€çƒæ—¶åº”è¯¥æ€ä¹ˆç«™ä½æœ€å®‰å…¨",
        "åŒæ‰“æ—¶,å‰åç«™ä½å’Œå·¦å³ç«™ä½åˆ†åˆ«é€‚åˆä»€ä¹ˆå±€é¢",
        "å•æ‰“é˜²å®ˆæ—¶,é‡å¿ƒåº”è¯¥æ”¾åœ¨å“ªé‡Œ",
        "æ ‡å‡†ç¾½æ¯›çƒæœ‰å¤šå°‘æ ¹ç¾½æ¯›",
        "ç¾½æ¯›çƒæœ€å¿«çƒé€Ÿèƒ½è¶…è¿‡é«˜é“å—",
        " ä¸€åœºæ­£å¼æ¯”èµ›æœ€å¤šä¼šæ‰“å‡ å±€"
        ]
    
    q = st.radio("è¯·é€‰æ‹©ä½ æƒ³é—®çš„é—®é¢˜:",questions)
    
    if st.button("æäº¤é—®é¢˜"):
        if not key:
            st.error("è¯·å…ˆå¡«å…¥ API KEY å“¦!")
        else:
            st.info("AI æ­£åœ¨æ€è€ƒä¸­...")
            
            client = OpenAI(api_key=key,base_url=base)
            
            try:
                resp = client.chat.completions.create(
                    model="deepseek-chat",
                    messages=[
                        {"role":"system","content":"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¾½æ¯›çƒå›½å®¶é˜Ÿæ•™ç»ƒ,è¯´è¯å¹½é»˜é£è¶£"},
                        {"role":"user","content": q},
                    ],
                    stream=True
                )
                
                st.success("æ•™ç»ƒè¯´:")
                
                response_placeholder = st.empty()
                full_response = ""
                
                for chunk in resp:
                    content = chunk.choices[0].delta.content
                    if content:
                        full_response += content
                        
                        response_placeholder.write(full_response)
                
            except Exception as e:
                st.error(f"å‡ºé”™äº†:{e}")
    
def main():
    # ä¾§è¾¹æ å¯¼èˆª
    st.sidebar.title("ğŸ¸ åŠŸèƒ½å¯¼èˆª")
    
    # å¢åŠ  Emoji çš„é€‰é¡¹
    page_options = [
        "ğŸ¸ å™¨ææŒ‡å—", 
        "ğŸ› ï¸ è£…å¤‡ç»´æŠ¤", 
        "ğŸ“ æŠ€æœ¯å…¥é—¨", 
        "ğŸ“– è§„åˆ™ç™¾ç§‘", 
        "ğŸŸï¸ åœºåœ°æ ‡å‡†",
        "ğŸ¤¸â€ çƒ­èº«åŠ¨ä½œ",
        "ğŸ“… è®­ç»ƒè®¡åˆ’",
        "ğŸ¤– AI æ•™ç»ƒ"
    ]
    
    page = st.sidebar.radio("é€‰æ‹©åŠŸèƒ½æ¨¡å—:", page_options)
    
    st.sidebar.info("ğŸ’¡ æç¤ºï¼šåœ¨æ‰‹æœºä¸Šæµè§ˆæ—¶ï¼Œç‚¹å‡»å·¦ä¸Šè§’ç®­å¤´å±•å¼€èœå•ã€‚")
    st.sidebar.markdown("---")
    
    # ä¿®æ”¹ç½²å
    st.sidebar.text("Made with â¤ï¸ by ç‹çªæ˜•")

    # ä¸»æ ‡é¢˜
    st.title("ğŸ¸ ç¾½æ¯›çƒå…¨èƒ½åŠ©æ‰‹")
    st.markdown("> **â€œä»æ–°æ‰‹åˆ°é«˜æ‰‹ï¼Œåªå·®è¿™ä¸€ä¸ªåŠ©æ‰‹çš„è·ç¦»ï¼â€** ğŸš€")
    st.divider()

    # é¡µé¢è·¯ç”±é€»è¾‘ (æ ¹æ®æ–°çš„å¸¦ Emoji çš„é€‰é¡¹è¿›è¡Œåˆ¤æ–­)
    if page == "ğŸ¸ å™¨ææŒ‡å—":
        page_racket_guide()
    elif page == "ğŸ› ï¸ è£…å¤‡ç»´æŠ¤":
        page_maintenance()
    elif page == "ğŸ“ æŠ€æœ¯å…¥é—¨":
        page_technique()
    elif page == "ğŸ“– è§„åˆ™ç™¾ç§‘":
        page_rules()
    elif page == "ğŸŸï¸ åœºåœ°æ ‡å‡†":
        page_court()
    elif page == "ğŸ¤¸â€ çƒ­èº«åŠ¨ä½œ":
        page_warmup()
    elif page == "ğŸ“… è®­ç»ƒè®¡åˆ’":
        page_plan()
    elif page == "ğŸ¤– AI æ•™ç»ƒ":
        page_ai()

if __name__ == "__main__":
    main()
